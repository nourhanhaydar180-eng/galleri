<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>استوديو الذكريات الشخصية</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary-color: #4a6fa5;
            --secondary-color: #166088;
            --accent-color: #ff7e5f;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            color: var(--dark-color);
            min-height: 100vh;
            padding-bottom: 60px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 20px;
            border-radius: 0 0 15px 15px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            text-align: center;
        }
        
        header h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        header h1 i {
            color: var(--accent-color);
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .tabs {
            display: flex;
            background-color: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .tab {
            flex: 1;
            text-align: center;
            padding: 15px 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            color: var(--dark-color);
            border-bottom: 3px solid transparent;
            min-width: 120px;
        }
        
        .tab:hover {
            background-color: #f1f5f9;
        }
        
        .tab.active {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
            background-color: #f8f9fa;
        }
        
        .tab i {
            margin-left: 8px;
        }
        
        .content-area {
            background-color: white;
            border-radius: 15px;
            box-shadow: var(--shadow);
            padding: 25px;
            margin-bottom: 25px;
            min-height: 500px;
            display: none;
        }
        
        .content-area.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .person-card {
            background: linear-gradient(to bottom right, #f8f9fa, #e9ecef);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.08);
            border-right: 5px solid var(--primary-color);
            transition: transform 0.3s ease;
        }
        
        .person-card:hover {
            transform: translateY(-5px);
        }
        
        .person-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .person-avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--primary-color);
            margin-left: 15px;
        }
        
        .person-info h3 {
            color: var(--secondary-color);
            margin-bottom: 5px;
        }
        
        .person-info p {
            color: #666;
            font-size: 0.9rem;
        }
        
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .gallery-item {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            height: 150px;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        
        .gallery-item:hover {
            transform: scale(1.05);
        }
        
        .gallery-item img, .gallery-item video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .gallery-item .overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
            color: white;
            padding: 10px;
            font-size: 0.85rem;
        }
        
        .upload-area {
            border: 3px dashed var(--primary-color);
            border-radius: 12px;
            padding: 40px 20px;
            text-align: center;
            margin: 20px 0;
            background-color: #f8f9fa;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .upload-area:hover {
            background-color: #e9ecef;
        }
        
        .upload-area i {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .upload-area h3 {
            margin-bottom: 10px;
            color: var(--secondary-color);
        }
        
        .btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin: 5px;
        }
        
        .btn:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
        }
        
        .btn-accent {
            background-color: var(--accent-color);
        }
        
        .btn-accent:hover {
            background-color: #ff6b47;
        }
        
        .btn-outline {
            background-color: transparent;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }
        
        .btn-outline:hover {
            background-color: var(--primary-color);
            color: white;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-color);
        }
        
        input, textarea, select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border 0.3s ease;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.2);
        }
        
        .editor-container {
            display: flex;
            flex-direction: column;
            height: 500px;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .editor-tools {
            display: flex;
            flex-wrap: wrap;
            background-color: #f8f9fa;
            padding: 15px;
            gap: 10px;
            border-bottom: 1px solid #ddd;
        }
        
        .editor-canvas {
            flex: 1;
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: auto;
        }
        
        .canvas-container {
            position: relative;
            background-color: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        
        #imageCanvas, #videoPlayer {
            max-width: 100%;
            max-height: 400px;
        }
        
        .hidden {
            display: none;
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }
        
        .modal.active .modal-content {
            transform: translateY(0);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #999;
        }
        
        .close-modal:hover {
            color: var(--dark-color);
        }
        
        .person-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .person-thumbnail {
            background: linear-gradient(to bottom right, #f8f9fa, #e9ecef);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.08);
            border-top: 5px solid var(--primary-color);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .person-thumbnail:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }
        
        .person-thumbnail img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--primary-color);
            margin-bottom: 15px;
        }
        
        .person-thumbnail h3 {
            color: var(--secondary-color);
            margin-bottom: 5px;
        }
        
        .person-thumbnail p {
            color: #666;
            font-size: 0.9rem;
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #888;
        }
        
        .empty-state i {
            font-size: 4rem;
            margin-bottom: 20px;
            color: #ddd;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
            margin-top: 40px;
            border-top: 1px solid #eee;
        }
        
        /* تصميم متجاوب للهواتف */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            header h1 {
                font-size: 1.8rem;
            }
            
            .tab {
                min-width: 100px;
                padding: 12px 8px;
                font-size: 0.9rem;
            }
            
            .content-area {
                padding: 20px 15px;
            }
            
            .gallery {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
            
            .gallery-item {
                height: 120px;
            }
            
            .person-list {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
            
            .editor-tools {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .btn {
                width: 100%;
                margin-bottom: 10px;
            }
        }
        
        @media (max-width: 480px) {
            .person-card {
                padding: 15px;
            }
            
            .person-header {
                flex-direction: column;
                text-align: center;
            }
            
            .person-avatar {
                margin-left: 0;
                margin-bottom: 10px;
            }
            
            .gallery {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .person-list {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1><i class="fas fa-camera-retro"></i> استوديو الذكريات الشخصية</h1>
            <p class="subtitle">احفظ ذكرياتك مع أحبائك في مكان واحد مع إمكانية التعديل والمشاركة</p>
        </div>
    </header>
    
    <div class="container">
        <div class="tabs">
            <div class="tab active" data-tab="home">
                <i class="fas fa-home"></i> الرئيسية
            </div>
            <div class="tab" data-tab="people">
                <i class="fas fa-users"></i> الأشخاص
            </div>
            <div class="tab" data-tab="add-person">
                <i class="fas fa-user-plus"></i> إضافة شخص
            </div>
            <div class="tab" data-tab="editor">
                <i class="fas fa-edit"></i> محرر الصور
            </div>
            <div class="tab" data-tab="video-editor">
                <i class="fas fa-video"></i> محرر الفيديو
            </div>
        </div>
        
        <!-- الصفحة الرئيسية -->
        <div id="home" class="content-area active">
            <h2><i class="fas fa-heart"></i> أهلاً بك في استوديو الذكريات</h2>
            <p>هذا الموقع يمكّنك من حفظ وتنظيم ذكرياتك مع الأشخاص المهمين في حياتك. يمكنك إضافة أشخاص جدد، رفع صور وفيديوهات، وتعديلها باستخدام أدوات متقدمة.</p>
            
            <div style="margin: 30px 0;">
                <h3><i class="fas fa-star"></i> الأشخاص المميزين</h3>
                <div id="featuredPeople" class="person-list">
                    <!-- سيتم إضافة الأشخاص هنا عبر JavaScript -->
                </div>
            </div>
            
            <div style="background-color: #f0f7ff; padding: 20px; border-radius: 12px; margin-top: 30px;">
                <h3><i class="fas fa-lightbulb"></i> كيف تستخدم الاستوديو؟</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 15px;">
                    <div style="text-align: center;">
                        <div style="background-color: var(--primary-color); color: white; width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px; font-weight: bold;">1</div>
                        <h4>أضف أشخاصاً</h4>
                        <p>أنشئ ملفاً لكل شخص مع اسمه وصورته</p>
                    </div>
                    <div style="text-align: center;">
                        <div style="background-color: var(--primary-color); color: white; width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px; font-weight: bold;">2</div>
                        <h4>ارفع الذكريات</h4>
                        <p>أضف صوراً وفيديوهات لكل شخص</p>
                    </div>
                    <div style="text-align: center;">
                        <div style="background-color: var(--primary-color); color: white; width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px; font-weight: bold;">3</div>
                        <h4>عدّل المحتوى</h4>
                        <p>استخدم أدوات التعديل لقص وتحسين الذكريات</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- صفحة الأشخاص -->
        <div id="people" class="content-area">
            <h2><i class="fas fa-users"></i> جميع الأشخاص</h2>
            <div id="peopleList" class="person-list">
                <!-- سيتم إضافة الأشخاص هنا عبر JavaScript -->
            </div>
        </div>
        
        <!-- صفحة إضافة شخص -->
        <div id="add-person" class="content-area">
            <h2><i class="fas fa-user-plus"></i> إضافة شخص جديد</h2>
            <form id="addPersonForm">
                <div class="form-group">
                    <label for="personName"><i class="fas fa-signature"></i> اسم الشخص</label>
                    <input type="text" id="personName" placeholder="مثال: محمد" required>
                </div>
                
                <div class="form-group">
                    <label for="personRelation"><i class="fas fa-handshake"></i> علاقتك به</label>
                    <select id="personRelation" required>
                        <option value="">اختر العلاقة</option>
                        <option value="عائلة">عائلة</option>
                        <option value="صديق">صديق</option>
                        <option value="زميل">زميل</option>
                        <option value="أخرى">أخرى</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="personDescription"><i class="fas fa-info-circle"></i> وصف مختصر</label>
                    <textarea id="personDescription" rows="3" placeholder="أضف وصفاً مختصراً عن هذا الشخص..."></textarea>
                </div>
                
                <div class="form-group">
                    <label><i class="fas fa-image"></i> صورة الشخص</label>
                    <div class="upload-area" id="avatarUpload">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <h3>اسحب وأفلت الصورة هنا أو انقر للاختيار</h3>
                        <p>الحجم الموصى به: 500x500 بكسل</p>
                        <input type="file" id="avatarInput" accept="image/*" style="display: none;">
                    </div>
                    <div id="avatarPreview" style="text-align: center; margin-top: 15px;"></div>
                </div>
                
                <div class="form-group">
                    <label><i class="fas fa-file-audio"></i> صوت الشخص (اختياري)</label>
                    <div class="upload-area" id="audioUpload" style="padding: 25px 20px;">
                        <i class="fas fa-microphone"></i>
                        <h3>اسحب وأفلت ملف الصوت هنا أو انقر للاختيار</h3>
                        <p>يمكنك رفع تسجيل لصوت هذا الشخص</p>
                        <input type="file" id="audioInput" accept="audio/*" style="display: none;">
                    </div>
                    <div id="audioPreview" style="text-align: center; margin-top: 15px;"></div>
                </div>
                
                <div style="display: flex; justify-content: center; margin-top: 30px;">
                    <button type="submit" class="btn"><i class="fas fa-save"></i> حفظ الشخص</button>
                    <button type="reset" class="btn btn-outline"><i class="fas fa-redo"></i> إعادة تعيين</button>
                </div>
            </form>
        </div>
        
        <!-- صفحة محرر الصور -->
        <div id="editor" class="content-area">
            <h2><i class="fas fa-edit"></i> محرر الصور</h2>
            
            <div class="form-group">
                <label><i class="fas fa-upload"></i> اختر صورة للتحرير</label>
                <div class="upload-area" id="imageUploadEditor">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <h3>اسحب وأفلت الصورة هنا أو انقر للاختيار</h3>
                    <p>يدعم الموقع الصور بصيغ JPG, PNG, GIF</p>
                    <input type="file" id="imageInputEditor" accept="image/*" style="display: none;">
                </div>
            </div>
            
            <div class="editor-container hidden" id="imageEditorContainer">
                <div class="editor-tools">
                    <button class="btn btn-outline" id="cropBtn"><i class="fas fa-crop"></i> قص</button>
                    <button class="btn btn-outline" id="rotateBtn"><i class="fas fa-redo"></i> تدوير</button>
                    <button class="btn btn-outline" id="flipHBtn"><i class="fas fa-arrows-alt-h"></i> قلب أفقي</button>
                    <button class="btn btn-outline" id="flipVBtn"><i class="fas fa-arrows-alt-v"></i> قلب عمودي</button>
                    <button class="btn btn-outline" id="brightnessBtn"><i class="fas fa-sun"></i> سطوع</button>
                    <button class="btn btn-outline" id="contrastBtn"><i class="fas fa-adjust"></i> تباين</button>
                    <button class="btn btn-outline" id="resetBtn"><i class="fas fa-undo"></i> إعادة تعيين</button>
                </div>
                
                <div class="editor-canvas">
                    <div class="canvas-container">
                        <canvas id="imageCanvas"></canvas>
                    </div>
                </div>
                
                <div style="padding: 15px; background-color: #f8f9fa; border-top: 1px solid #ddd; display: flex; justify-content: center;">
                    <button class="btn" id="saveImageBtn"><i class="fas fa-download"></i> حفظ الصورة</button>
                    <button class="btn btn-accent" id="applyToPersonBtn"><i class="fas fa-user-check"></i> تطبيق على شخص</button>
                </div>
            </div>
            
            <div id="editorInstructions" class="empty-state">
                <i class="fas fa-edit"></i>
                <h3>ابدأ بتحرير صورة</h3>
                <p>اختر صورة من جهازك أو من معرض الأشخاص لبدء التحرير</p>
            </div>
        </div>
        
        <!-- صفحة محرر الفيديو -->
        <div id="video-editor" class="content-area">
            <h2><i class="fas fa-video"></i> محرر الفيديو</h2>
            
            <div class="form-group">
                <label><i class="fas fa-upload"></i> اختر فيديو للتحرير</label>
                <div class="upload-area" id="videoUploadEditor">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <h3>اسحب وأفلت الفيديو هنا أو انقر للاختيار</h3>
                    <p>يدعم الموقع الفيديوهات بصيغ MP4, WebM, OGG</p>
                    <input type="file" id="videoInputEditor" accept="video/*" style="display: none;">
                </div>
            </div>
            
            <div class="editor-container hidden" id="videoEditorContainer">
                <div class="editor-tools">
                    <button class="btn btn-outline" id="trimStartBtn"><i class="fas fa-cut"></i> تحديد البداية</button>
                    <button class="btn btn-outline" id="trimEndBtn"><i class="fas fa-cut"></i> تحديد النهاية</button>
                    <button class="btn btn-outline" id="applyTrimBtn"><i class="fas fa-check"></i> تطبيق القص</button>
                    <input type="range" id="videoTrimRange" min="0" max="100" value="0" style="flex: 1; max-width: 300px;">
                    <button class="btn btn-outline" id="resetVideoBtn"><i class="fas fa-undo"></i> إعادة تعيين</button>
                </div>
                
                <div class="editor-canvas">
                    <video id="videoPlayer" controls>
                        متصفحك لا يدعم تشغيل الفيديو
                    </video>
                </div>
                
                <div style="padding: 15px; background-color: #f8f9fa; border-top: 1px solid #ddd; display: flex; justify-content: center;">
                    <button class="btn" id="saveVideoBtn"><i class="fas fa-download"></i> حفظ الفيديو</button>
                </div>
            </div>
            
            <div id="videoInstructions" class="empty-state">
                <i class="fas fa-video"></i>
                <h3>ابدأ بتحرير فيديو</h3>
                <p>اختر فيديو من جهازك أو من معرض الأشخاص لبدء التحرير</p>
            </div>
        </div>
    </div>
    
    <!-- نافذة معاينة الشخص -->
    <div id="personModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalPersonName"></h2>
                <button class="close-modal" id="closePersonModal">&times;</button>
            </div>
            <div id="modalPersonContent">
                <!-- سيتم تعبئة محتوى الشخص هنا -->
            </div>
        </div>
    </div>
    
    <footer>
        <div class="container">
            <p>استوديو الذكريات الشخصية &copy; <span id="currentYear"></span> - جميع الحقوق محفوظة</p>
            <p style="margin-top: 10px; font-size: 0.8rem;">صمم بحب لحفظ الذكريات مع الأحباب</p>
        </div>
    </footer>

    <script>
        // بيانات التطبيق
        let people = JSON.parse(localStorage.getItem('memoryStudioPeople')) || [
            {
                id: 1,
                name: "محمد",
                relation: "عائلة",
                description: "الأخ الأكبر، يحب السفر والتصوير",
                avatar: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80",
                audio: null,
                images: [
                    "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80",
                    "https://images.unsplash.com/photo-1544725176-7c40e5a71c5e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=400&q=80"
                ],
                videos: []
            },
            {
                id: 2,
                name: "سارة",
                relation: "صديق",
                description: "صديقة الطفولة، تحب الرسم والقراءة",
                avatar: "https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80",
                audio: null,
                images: [
                    "https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w-400&q=80"
                ],
                videos: []
            }
        ];
        
        // متغيرات عامة
        let currentPersonId = null;
        let currentImage = null;
        let currentVideo = null;
        let canvas = document.getElementById('imageCanvas');
        let ctx = canvas.getContext('2d');
        let image = new Image();
        
        // تهيئة التطبيق
        document.addEventListener('DOMContentLoaded', function() {
            // تعيين سنة الحالية في الفوتر
            document.getElementById('currentYear').textContent = new Date().getFullYear();
            
            // تهيئة نظام التبويب
            initTabs();
            
            // عرض الأشخاص في الصفحة الرئيسية
            renderFeaturedPeople();
            
            // عرض جميع الأشخاص
            renderAllPeople();
            
            // إعداد نموذج إضافة شخص
            setupAddPersonForm();
            
            // إعداد محرر الصور
            setupImageEditor();
            
            // إعداد محرر الفيديو
            setupVideoEditor();
            
            // إعداد النافذة المنبثقة
            setupModal();
            
            // إعداد رفع الملفات
            setupFileUploads();
        });
        
        // وظيفة تهيئة نظام التبويب
        function initTabs() {
            const tabs = document.querySelectorAll('.tab');
            const contentAreas = document.querySelectorAll('.content-area');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // إزالة النشاط من جميع التبويبات
                    tabs.forEach(t => t.classList.remove('active'));
                    contentAreas.forEach(c => c.classList.remove('active'));
                    
                    // إضافة النشاط للتبويب المحدد
                    this.classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                });
            });
        }
        
        // وظيفة عرض الأشخاص المميزين في الصفحة الرئيسية
        function renderFeaturedPeople() {
            const featuredContainer = document.getElementById('featuredPeople');
            
            if (people.length === 0) {
                featuredContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-users"></i>
                        <h3>لا يوجد أشخاص بعد</h3>
                        <p>ابدأ بإضافة أشخاص جدد لحفظ ذكرياتك معهم</p>
                    </div>
                `;
                return;
            }
            
            let featuredHTML = '';
            // عرض أول 4 أشخاص كمميزين
            const featured = people.slice(0, 4);
            
            featured.forEach(person => {
                featuredHTML += `
                    <div class="person-thumbnail" data-id="${person.id}">
                        <img src="${person.avatar}" alt="${person.name}">
                        <h3>${person.name}</h3>
                        <p>${person.relation}</p>
                        <p style="font-size: 0.8rem; margin-top: 5px;">${person.images.length} صورة</p>
                    </div>
                `;
            });
            
            featuredContainer.innerHTML = featuredHTML;
            
            // إضافة مستمعي الأحداث لعرض تفاصيل الشخص
            document.querySelectorAll('.person-thumbnail').forEach(thumb => {
                thumb.addEventListener('click', function() {
                    const personId = parseInt(this.getAttribute('data-id'));
                    openPersonModal(personId);
                });
            });
        }
        
        // وظيفة عرض جميع الأشخاص
        function renderAllPeople() {
            const peopleContainer = document.getElementById('peopleList');
            
            if (people.length === 0) {
                peopleContainer.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-users"></i>
                        <h3>لا يوجد أشخاص بعد</h3>
                        <p>اذهب إلى تبويب "إضافة شخص" لإنشاء ملف شخص جديد</p>
                    </div>
                `;
                return;
            }
            
            let peopleHTML = '';
            
            people.forEach(person => {
                peopleHTML += `
                    <div class="person-thumbnail" data-id="${person.id}">
                        <img src="${person.avatar}" alt="${person.name}">
                        <h3>${person.name}</h3>
                        <p>${person.relation}</p>
                        <p style="font-size: 0.8rem; margin-top: 5px;">${person.images.length} صورة، ${person.videos.length} فيديو</p>
                    </div>
                `;
            });
            
            peopleContainer.innerHTML = peopleHTML;
            
            // إضافة مستمعي الأحداث لعرض تفاصيل الشخص
            document.querySelectorAll('.person-thumbnail').forEach(thumb => {
                thumb.addEventListener('click', function() {
                    const personId = parseInt(this.getAttribute('data-id'));
                    openPersonModal(personId);
                });
            });
        }
        
        // وظيفة إعداد نموذج إضافة شخص
        function setupAddPersonForm() {
            const form = document.getElementById('addPersonForm');
            const avatarUpload = document.getElementById('avatarUpload');
            const avatarInput = document.getElementById('avatarInput');
            const audioUpload = document.getElementById('audioUpload');
            const audioInput = document.getElementById('audioInput');
            let avatarFile = null;
            let audioFile = null;
            
            // رفع صورة الشخص
            avatarUpload.addEventListener('click', () => avatarInput.click());
            avatarInput.addEventListener('change', function(e) {
                if (this.files && this.files[0]) {
                    avatarFile = this.files[0];
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        document.getElementById('avatarPreview').innerHTML = `
                            <img src="${e.target.result}" style="width: 150px; height: 150px; border-radius: 50%; object-fit: cover; border: 3px solid var(--primary-color);">
                            <p style="margin-top: 10px;">تم اختيار صورة الشخص</p>
                        `;
                    };
                    
                    reader.readAsDataURL(avatarFile);
                }
            });
            
            // رفع صوت الشخص
            audioUpload.addEventListener('click', () => audioInput.click());
            audioInput.addEventListener('change', function(e) {
                if (this.files && this.files[0]) {
                    audioFile = this.files[0];
                    
                    document.getElementById('audioPreview').innerHTML = `
                        <div style="background-color: #f0f7ff; padding: 15px; border-radius: 10px; display: inline-block;">
                            <i class="fas fa-volume-up" style="color: var(--primary-color); font-size: 1.5rem; margin-bottom: 10px; display: block;"></i>
                            <p>${audioFile.name}</p>
                            <audio controls style="margin-top: 10px; width: 250px;">
                                <source src="${URL.createObjectURL(audioFile)}" type="${audioFile.type}">
                                متصفحك لا يدعم تشغيل الصوت
                            </audio>
                        </div>
                    `;
                }
            });
            
            // إرسال النموذج
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const name = document.getElementById('personName').value;
                const relation = document.getElementById('personRelation').value;
                const description = document.getElementById('personDescription').value;
                
                // إنشاء معرف فريد للشخص
                const newId = people.length > 0 ? Math.max(...people.map(p => p.id)) + 1 : 1;
                
                // صورة افتراضية إذا لم يتم رفع صورة
                let avatarUrl = "https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=200&q=80";
                
                // إذا تم رفع صورة، نستخدمها
                if (avatarFile) {
                    avatarUrl = URL.createObjectURL(avatarFile);
                }
                
                // إنشاء كائن الشخص الجديد
                const newPerson = {
                    id: newId,
                    name: name,
                    relation: relation,
                    description: description,
                    avatar: avatarUrl,
                    audio: audioFile ? URL.createObjectURL(audioFile) : null,
                    images: [avatarUrl], // نضيف الصورة الأساسية للمعرض
                    videos: []
                };
                
                // إضافة الشخص للقائمة
                people.push(newPerson);
                
                // حفظ في التخزين المحلي
                localStorage.setItem('memoryStudioPeople', JSON.stringify(people));
                
                // إعادة تعيين النموذج
                form.reset();
                document.getElementById('avatarPreview').innerHTML = '';
                document.getElementById('audioPreview').innerHTML = '';
                avatarFile = null;
                audioFile = null;
                
                // تحديث العروض
                renderFeaturedPeople();
                renderAllPeople();
                
                // عرض رسالة نجاح
                alert(`تمت إضافة ${name} بنجاح إلى استوديو الذكريات!`);
                
                // الانتقال إلى تبويب الأشخاص
                document.querySelector('.tab[data-tab="people"]').click();
            });
        }
        
        // وظيفة إعداد محرر الصور
        function setupImageEditor() {
            const imageUpload = document.getElementById('imageUploadEditor');
            const imageInput = document.getElementById('imageInputEditor');
            const editorContainer = document.getElementById('imageEditorContainer');
            const instructions = document.getElementById('editorInstructions');
            
            // رفع صورة للتحرير
            imageUpload.addEventListener('click', () => imageInput.click());
            imageInput.addEventListener('change', function(e) {
                if (this.files && this.files[0]) {
                    const file = this.files[0];
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        currentImage = new Image();
                        currentImage.onload = function() {
                            // عرض المحرر وإخفاء التعليمات
                            editorContainer.classList.remove('hidden');
                            instructions.classList.add('hidden');
                            
                            // ضبط حجم الكانفاس وعرض الصورة
                            canvas.width = Math.min(800, currentImage.width);
                            canvas.height = Math.min(500, currentImage.height);
                            
                            // رسم الصورة على الكانفاس
                            ctx.drawImage(currentImage, 0, 0, canvas.width, canvas.height);
                        };
                        currentImage.src = e.target.result;
                    };
                    
                    reader.readAsDataURL(file);
                }
            });
            
            // إعداد أزرار التحكم
            document.getElementById('cropBtn').addEventListener('click', function() {
                alert('ميزة القص: اسحب على الصورة لتحديد المنطقة التي تريد قصها');
                // في التطبيق الكامل، هنا نضيف مكتبة لقص الصور
            });
            
            document.getElementById('rotateBtn').addEventListener('click', function() {
                if (!currentImage) return;
                
                // حفظ حالة الكانفاس
                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                
                // تدوير الكانفاس
                canvas.width = canvas.height;
                canvas.height = imageData.width;
                
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.translate(canvas.width / 2, canvas.height / 2);
                ctx.rotate(Math.PI / 2);
                ctx.drawImage(currentImage, -currentImage.height / 2, -currentImage.width / 2);
                ctx.setTransform(1, 0, 0, 1, 0, 0);
                
                // تحديث الصورة الحالية
                const tempCanvas = document.createElement('canvas');
                const tempCtx = tempCanvas.getContext('2d');
                tempCanvas.width = canvas.width;
                tempCanvas.height = canvas.height;
                tempCtx.drawImage(canvas, 0, 0);
                
                currentImage = new Image();
                currentImage.src = tempCanvas.toDataURL();
            });
            
            document.getElementById('flipHBtn').addEventListener('click', function() {
                if (!currentImage) return;
                
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.translate(canvas.width, 0);
                ctx.scale(-1, 1);
                ctx.drawImage(currentImage, 0, 0, canvas.width, canvas.height);
                ctx.setTransform(1, 0, 0, 1, 0, 0);
                
                // تحديث الصورة الحالية
                const tempCanvas = document.createElement('canvas');
                const tempCtx = tempCanvas.getContext('2d');
                tempCanvas.width = canvas.width;
                tempCanvas.height = canvas.height;
                tempCtx.drawImage(canvas, 0, 0);
                
                currentImage = new Image();
                currentImage.src = tempCanvas.toDataURL();
            });
            
            document.getElementById('flipVBtn').addEventListener('click', function() {
                if (!currentImage) return;
                
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.translate(0, canvas.height);
                ctx.scale(1, -1);
                ctx.drawImage(currentImage, 0, 0, canvas.width, canvas.height);
                ctx.setTransform(1, 0, 0, 1, 0, 0);
                
                // تحديث الصورة الحالية
                const tempCanvas = document.createElement('canvas');
                const tempCtx = tempCanvas.getContext('2d');
                tempCanvas.width = canvas.width;
                tempCanvas.height = canvas.height;
                tempCtx.drawImage(canvas, 0, 0);
                
                currentImage = new Image();
                currentImage.src = tempCanvas.toDataURL();
            });
            
            document.getElementById('brightnessBtn').addEventListener('click', function() {
                if (!currentImage) return;
                
                const brightness = prompt('أدخل قيمة السطوع (من -100 إلى 100):', '10');
                if (brightness !== null) {
                    applyFilter('brightness', parseInt(brightness));
                }
            });
            
            document.getElementById('contrastBtn').addEventListener('click', function() {
                if (!currentImage) return;
                
                const contrast = prompt('أدخل قيمة التباين (من -100 إلى 100):', '10');
                if (contrast !== null) {
                    applyFilter('contrast', parseInt(contrast));
                }
            });
            
            document.getElementById('resetBtn').addEventListener('click', function() {
                if (!currentImage) return;
                
                canvas.width = Math.min(800, currentImage.width);
                canvas.height = Math.min(500, currentImage.height);
                ctx.drawImage(currentImage, 0, 0, canvas.width, canvas.height);
            });
            
            document.getElementById('saveImageBtn').addEventListener('click', function() {
                if (!currentImage) return;
                
                const link = document.createElement('a');
                link.download = 'صورة-معدلة-' + Date.now() + '.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
            });
            
            document.getElementById('applyToPersonBtn').addEventListener('click', function() {
                if (!currentImage) return;
                
                // عرض قائمة بالأشخاص لتطبيق الصورة عليهم
                let optionsHTML = '';
                people.forEach(person => {
                    optionsHTML += `<option value="${person.id}">${person.name}</option>`;
                });
                
                const personId = prompt(`أدخل معرف الشخص لتطبيق الصورة عليه:\n${people.map(p => `${p.id}: ${p.name}`).join('\n')}`);
                
                if (personId) {
                    const person = people.find(p => p.id === parseInt(personId));
                    if (person) {
                        // إضافة الصورة المعدلة إلى معرض الشخص
                        const imageUrl = canvas.toDataURL('image/png');
                        person.images.push(imageUrl);
                        
                        // حفظ التغييرات
                        localStorage.setItem('memoryStudioPeople', JSON.stringify(people));
                        
                        alert(`تمت إضافة الصورة إلى معرض ${person.name} بنجاح!`);
                    } else {
                        alert('لم يتم العثور على الشخص المحدد');
                    }
                }
            });
        }
        
        // تطبيق فلتر على الصورة
        function applyFilter(type, value) {
            if (!currentImage) return;
            
            // رسم الصورة الأصلية
            canvas.width = Math.min(800, currentImage.width);
            canvas.height = Math.min(500, currentImage.height);
            ctx.drawImage(currentImage, 0, 0, canvas.width, canvas.height);
            
            // تطبيق الفلتر
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            
            for (let i = 0; i < data.length; i += 4) {
                if (type === 'brightness') {
                    // تطبيق السطوع
                    data[i] += value;     // الأحمر
                    data[i + 1] += value; // الأخضر
                    data[i + 2] += value; // الأزرق
                } else if (type === 'contrast') {
                    // تطبيق التباين
                    const factor = (259 * (value + 255)) / (255 * (259 - value));
                    
                    data[i] = factor * (data[i] - 128) + 128;
                    data[i + 1] = factor * (data[i + 1] - 128) + 128;
                    data[i + 2] = factor * (data[i + 2] - 128) + 128;
                }
            }
            
            ctx.putImageData(imageData, 0, 0);
            
            // تحديث الصورة الحالية
            const tempCanvas = document.createElement('canvas');
            const tempCtx = tempCanvas.getContext('2d');
            tempCanvas.width = canvas.width;
            tempCanvas.height = canvas.height;
            tempCtx.drawImage(canvas, 0, 0);
            
            currentImage = new Image();
            currentImage.src = tempCanvas.toDataURL();
        }
        
        // وظيفة إعداد محرر الفيديو
        function setupVideoEditor() {
            const videoUpload = document.getElementById('videoUploadEditor');
            const videoInput = document.getElementById('videoInputEditor');
            const editorContainer = document.getElementById('videoEditorContainer');
            const instructions = document.getElementById('videoInstructions');
            const videoPlayer = document.getElementById('videoPlayer');
            let videoFile = null;
            
            // رفع فيديو للتحرير
            videoUpload.addEventListener('click', () => videoInput.click());
            videoInput.addEventListener('change', function(e) {
                if (this.files && this.files[0]) {
                    videoFile = this.files[0];
                    const videoUrl = URL.createObjectURL(videoFile);
                    
                    // عرض المحرر وإخفاء التعليمات
                    editorContainer.classList.remove('hidden');
                    instructions.classList.add('hidden');
                    
                    // تعيين مصدر الفيديو
                    videoPlayer.src = videoUrl;
                    videoPlayer.load();
                    
                    // تعيين النطاق الزمني
                    const range = document.getElementById('videoTrimRange');
                    range.value = 0;
                    
                    // تحديث النطاق الزمني أثناء تشغيل الفيديو
                    videoPlayer.addEventListener('timeupdate', function() {
                        if (videoPlayer.duration) {
                            const percent = (videoPlayer.currentTime / videoPlayer.duration) * 100;
                            range.value = percent;
                        }
                    });
                    
                    // تغيير وقت الفيديو عند تحريك النطاق
                    range.addEventListener('input', function() {
                        if (videoPlayer.duration) {
                            videoPlayer.currentTime = (this.value / 100) * videoPlayer.duration;
                        }
                    });
                }
            });
            
            // إعداد أزرار تحرير الفيديو
            let trimStart = 0;
            let trimEnd = 100;
            
            document.getElementById('trimStartBtn').addEventListener('click', function() {
                if (!videoFile) return;
                trimStart = document.getElementById('videoTrimRange').value;
                alert(`تم تحديد بداية القص عند ${trimStart}%`);
            });
            
            document.getElementById('trimEndBtn').addEventListener('click', function() {
                if (!videoFile) return;
                trimEnd = document.getElementById('videoTrimRange').value;
                alert(`تم تحديد نهاية القص عند ${trimEnd}%`);
            });
            
            document.getElementById('applyTrimBtn').addEventListener('click', function() {
                if (!videoFile) return;
                alert(`سيتم قص الفيديو من ${trimStart}% إلى ${trimEnd}%`);
                // في التطبيق الكامل، هنا نستخدم مكتبة لقص الفيديو
            });
            
            document.getElementById('resetVideoBtn').addEventListener('click', function() {
                if (!videoFile) return;
                videoPlayer.currentTime = 0;
                trimStart = 0;
                trimEnd = 100;
                document.getElementById('videoTrimRange').value = 0;
            });
            
            document.getElementById('saveVideoBtn').addEventListener('click', function() {
                if (!videoFile) return;
                alert('سيتم حفظ الفيديو على جهازك. في التطبيق الكامل، سيتم تصدير الفيديو بعد التعديل.');
                // في التطبيق الكامل، هنا نستخدم مكتبة لتصدير الفيديو
            });
        }
        
        // وظيفة إعداد النافذة المنبثقة
        function setupModal() {
            const modal = document.getElementById('personModal');
            const closeBtn = document.getElementById('closePersonModal');
            
            // إغلاق النافذة عند النقر على زر الإغلاق
            closeBtn.addEventListener('click', function() {
                modal.classList.remove('active');
            });
            
            // إغلاق النافذة عند النقر خارج المحتوى
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.classList.remove('active');
                }
            });
        }
        
        // وظيفة فتح نافذة معاينة الشخص
        function openPersonModal(personId) {
            const person = people.find(p => p.id === personId);
            if (!person) return;
            
            // تعيين اسم الشخص في النافذة
            document.getElementById('modalPersonName').textContent = person.name;
            
            // بناء محتوى النافذة
            let modalContent = `
                <div class="person-card">
                    <div class="person-header">
                        <img src="${person.avatar}" alt="${person.name}" class="person-avatar">
                        <div class="person-info">
                            <h3>${person.name}</h3>
                            <p><strong>العلاقة:</strong> ${person.relation}</p>
                            <p><strong>الوصف:</strong> ${person.description}</p>
                        </div>
                    </div>
                </div>
            `;
            
            // عرض الصوت إذا كان موجوداً
            if (person.audio) {
                modalContent += `
                    <div style="margin: 20px 0; background-color: #f0f7ff; padding: 15px; border-radius: 10px;">
                        <h3 style="color: var(--primary-color); margin-bottom: 10px;"><i class="fas fa-volume-up"></i> صوت ${person.name}</h3>
                        <audio controls style="width: 100%;">
                            <source src="${person.audio}" type="audio/mpeg">
                            متصفحك لا يدعم تشغيل الصوت
                        </audio>
                    </div>
                `;
            }
            
            // عرض معرض الصور
            if (person.images.length > 0) {
                modalContent += `
                    <h3 style="color: var(--primary-color); margin: 20px 0 10px;"><i class="fas fa-images"></i> معرض الصور (${person.images.length})</h3>
                    <div class="gallery">
                `;
                
                person.images.forEach((img, index) => {
                    modalContent += `
                        <div class="gallery-item">
                            <img src="${img}" alt="صورة ${person.name} ${index + 1}">
                            <div class="overlay">صورة ${index + 1}</div>
                        </div>
                    `;
                });
                
                modalContent += `</div>`;
            }
            
            // عرض معرض الفيديوهات
            if (person.videos.length > 0) {
                modalContent += `
                    <h3 style="color: var(--primary-color); margin: 20px 0 10px;"><i class="fas fa-video"></i> معرض الفيديوهات (${person.videos.length})</h3>
                    <div class="gallery">
                `;
                
                person.videos.forEach((video, index) => {
                    modalContent += `
                        <div class="gallery-item">
                            <video controls>
                                <source src="${video}" type="video/mp4">
                                متصفحك لا يدعم تشغيل الفيديو
                            </video>
                            <div class="overlay">فيديو ${index + 1}</div>
                        </div>
                    `;
                });
                
                modalContent += `</div>`;
            }
            
            // إضافة أزرار التحكم
            modalContent += `
                <div style="display: flex; justify-content: center; margin-top: 30px; flex-wrap: wrap;">
                    <button class="btn" id="addImageToPerson"><i class="fas fa-image"></i> إضافة صورة</button>
                    <button class="btn" id="addVideoToPerson"><i class="fas fa-video"></i> إضافة فيديو</button>
                    <button class="btn btn-accent" id="editPersonBtn"><i class="fas fa-edit"></i> تعديل الملف</button>
                </div>
            `;
            
            // تعيين المحتوى في النافذة
            document.getElementById('modalPersonContent').innerHTML = modalContent;
            
            // فتح النافذة
            document.getElementById('personModal').classList.add('active');
            
            // حفظ معرف الشخص الحالي
            currentPersonId = personId;
            
            // إعداد أزرار التحكم بعد إضافتها للصفحة
            setTimeout(() => {
                // زر إضافة صورة
                document.getElementById('addImageToPerson').addEventListener('click', function() {
                    const input = document.createElement('input');
                    input.type = 'file';
                    input.accept = 'image/*';
                    
                    input.addEventListener('change', function(e) {
                        if (this.files && this.files[0]) {
                            const file = this.files[0];
                            const imageUrl = URL.createObjectURL(file);
                            
                            // إضافة الصورة للشخص
                            const person = people.find(p => p.id === currentPersonId);
                            if (person) {
                                person.images.push(imageUrl);
                                localStorage.setItem('memoryStudioPeople', JSON.stringify(people));
                                
                                // إعادة فتح النافذة لعرض التحديث
                                openPersonModal(currentPersonId);
                            }
                        }
                    });
                    
                    input.click();
                });
                
                // زر إضافة فيديو
                document.getElementById('addVideoToPerson').addEventListener('click', function() {
                    const input = document.createElement('input');
                    input.type = 'file';
                    input.accept = 'video/*';
                    
                    input.addEventListener('change', function(e) {
                        if (this.files && this.files[0]) {
                            const file = this.files[0];
                            const videoUrl = URL.createObjectURL(file);
                            
                            // إضافة الفيديو للشخص
                            const person = people.find(p => p.id === currentPersonId);
                            if (person) {
                                person.videos.push(videoUrl);
                                localStorage.setItem('memoryStudioPeople', JSON.stringify(people));
                                
                                // إعادة فتح النافذة لعرض التحديث
                                openPersonModal(currentPersonId);
                            }
                        }
                    });
                    
                    input.click();
                });
                
                // زر تعديل الملف
                document.getElementById('editPersonBtn').addEventListener('click', function() {
                    alert('ميزة تعديل الملف الشخصي قيد التطوير');
                    // في التطبيق الكامل، هنا نفتح نموذج تعديل الشخص
                });
            }, 100);
        }
        
        // وظيفة إعداد رفع الملفات
        function setupFileUploads() {
            // إضافة تأثير السحب والإفلات
            const uploadAreas = document.querySelectorAll('.upload-area');
            
            uploadAreas.forEach(area => {
                area.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.style.backgroundColor = '#e9ecef';
                    this.style.borderColor = 'var(--accent-color)';
                });
                
                area.addEventListener('dragleave', function(e) {
                    e.preventDefault();
                    this.style.backgroundColor = '#f8f9fa';
                    this.style.borderColor = 'var(--primary-color)';
                });
                
                area.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.style.backgroundColor = '#f8f9fa';
                    this.style.borderColor = 'var(--primary-color)';
                    
                    // الحصول على الملفات المنسدلة
                    const files = e.dataTransfer.files;
                    if (files.length > 0) {
                        // في التطبيق الكامل، هنا نتعامل مع الملفات المنسدلة
                        alert(`تم سحب ${files.length} ملف`);
                    }
                });
            });
        }
    </script>
</body>
</html>